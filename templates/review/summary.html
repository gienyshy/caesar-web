{% extends "base.html" %}

{% block css %}
{{ block.super }}
<link rel="stylesheet" href="{{ STATIC_URL }}css/dashboard.css" type="text/css" />
<link rel="stylesheet" href="{{ STATIC_URL }}css/summary.css" type="text/css" />
{% endblock %}

{% block js %}
{{ block.super }}

<script>
$(document).ready(function() {

    $('.activity-line').click(function(e) {
      var activityType = this.id.split('-')[0]
      var comment_Id = this.id.split('-')[1];
      var chunk_Id = this.id.split('-')[2];
      window.location = "/chunks/view/" + chunk_Id + "#" + activityType + "-" + comment_Id;
      return false;
    });

});
</script>

{% endblock %}

{% block breadcrumbs %}
  <a class="breadcrumb first-breadcrumb" href="{% url review.views.dashboard %}">Dashboard</a>
  {% if user != participant %}
    <a class="breadcrumb" href="{% url review.views.allusers %}">all users</a>
  {% endif %}
  <span class="breadcrumb">{{ participant.username }}</span>
{% endblock %}


{% block content %}

<h2 class="task-header">{{ participant.first_name }} {{ participant.last_name }}</h2> 
<h3 class="task-header">{{ participant.username }}</h3>
{%if participant.profile.is_student %}
    <a class="breadcrumb first-breadcrumb" href="{% url review.views.student_dashboard participant.username%}"> [Student Dashboard]</a> {%endif%}
<h4 class="task header"> reputation: {{participant.profile.reputation}}

<h2 class="task-header">activity stream</h2>
{% for assignment, review_data in assignment_data %}

<h3 class="assignment-display">
  <a name="assignment-display"></a> {{ assignment.name }}
  <div class="view-all-activity">
    <a href="{% url review.views.all_activity assignment.id participant.username %}"> view with code</a>
  </div>
</h3>
<table class="assignment-stream">
  {% for type, comment, snippet, is_vote, vote in review_data %}
  <tr id="{% if is_vote %}{% if vote.value == 1 %}voteup-{{comment.id}}-{{comment.chunk.id}}
                          {% else %}votedown-{{comment.id}}-{{comment.chunk.id}}
                          {% endif %}
          {% else %}comment-{{comment.id}}-{{comment.chunk.id}}
          {% endif %}" class="activity-line">
    <td><span class="type" id="{{type}}" title="{{type}}">
    </span></td>
    <td class="{% if is_vote %}grey-text{% else %}black-text{% endif %}"> {{ snippet }} </td>
    <td class="grey-text"> {{ comment.chunk.name }} </td>
    <td class="grey-text"> {{ comment.modified }} </td>
  </tr>
  {% empty %}
  {% endfor %}
</table>
{% empty %}
{% endfor %}
{% endblock %}
