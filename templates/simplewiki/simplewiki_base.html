{% extends "base.html" %}
{% block css %}
    {{ block.super}}
    
    <style type="text/css">
        .current, .notcurrent, .search {
            font-size: 14pt;
            display:inline;
        }
        
        .current {
            border:2px solid #000;
            padding: 2px 3px 2px 3px; 
            border-radius: 4px;
            color: #000;
            text-decoration: none;
        }
        
        .notcurrent {
            border:2px solid #aaa;
            padding: 2px 3px 2px 3px; 
            border-radius: 4px;
            color: #aaa;
            text-decoration: none;
        }
        
                
        .search {
            
        }
        
        #wiki_article {
            font-size: 11pt;
            padding: 1em 2em 1em 1em;
            background: #eee;
            border-radius: 10px;
        }
        
        #id_contents {
            font-size: 11pt;
            box-sizing: border-box;
            width:100%;
            height:40em;
        }
        
        #sidebar {
            border:2px solid #555;
            border-radius: 10px;
            padding: 0px 5px 5px 5px; 
            font-size:12pt
        }

        
        .active-search {
            color:#000;
        }
        
        .inactive-search {
            /*color:#aaa;*/
        }
    
    </style>
    
    <!-- SIMPLEWIKI DEFAULT STYLING. CLASHES WITH CAESAR STYLING SO COMMENTED OUT -->
    <!-- <link rel="stylesheet" media="screen,print" href="/static/simplewiki/css/base.css" /> -->
    <!-- <link rel="stylesheet" media="print" href="/static/simplewiki/css/base_print.css" /> -->
    <link rel="stylesheet" href="/static/simplewiki/css/autosuggest_inquisitor.css" />
    {% load i18n simplewiki_utils %}
{% endblock %}

{% block js %}
    {{ block.super }}
    <script type="text/javascript" src="/static/simplewiki/js/bsn.AutoSuggest_c_2.0.js"></script>
    <script type="text/javascript">
        function set_related_article_id(s) {
            document.getElementById('wiki_related_input_id').value = s.id;
            document.getElementById('wiki_related_input_submit').disabled=false;
        }
        var x = window.onload;
        window.onload = function(){
                var options = {
                script: "{% url search_related wiki_article.get_url %}/?self={{wiki_article.pk }}&",
                json: true,
                varname: "query",
                maxresults: 35,
                callback: set_related_article_id,
                noresults: "{% trans "Nothing found!" %}"
            };
            var as = new AutoSuggest('wiki_related_input', options);
            if (typeof x == 'function')
                x();
        }
    </script>
{% endblock %}

{% block breadcrumbs %}
    <a class="breadcrumb first-breadcrumb" href="{% url review.views.dashboard %}">Dashboard</a>
    <a class="breadcrumb" href="/wiki/">Wiki</a>
    {% if wiki_article.slug %}
        <a class="breadcrumb" href="/wiki/{{wiki_article.slug}}/">{{wiki_article.slug}}</a>
    {% endif %}
{% endblock %}

{% block content %}
  
    <!-- Title -->
    <br>
    {% if wiki_article %}
        <table><tr>
        <td style="vertical-align:bottom"><h1 style="display:inline">#{{ wiki_article.slug }} </h1></td>
        <td style="text-align:right; vertical-align:middle">
            <a class="{% if view == 'read' %}current{% else %}notcurrent{% endif %}" href="{% url wiki_view wiki_article.get_url %}">Read</a> 
            <a class="{% if view == 'edit' %}current{% else %}notcurrent{% endif %}" href='{% url wiki_edit wiki_article.get_url %}'><img src="/static/img/pencil.png" /> Edit</a> 
            <a class="{% if view == 'history' %}current{% else %}notcurrent{% endif %}" href='{% url wiki_history wiki_article.get_url 1 %}'><img src="/static/img/history-small.png" /> View History</a>
            <form style="display:inline" method="POST" action='{% url wiki_search_articles wiki_article.get_url %}'>{% csrf_token %}
                <input name="value" id="search" class="search inactive-search" value="Search..." onblur="if(this.value=='') {this.value='Search...';$('#search').addClass('inactive-search');$('#search').removeClass('active-search');}" onfocus="if(this.value=='Search...') { this.value=''; $('#search').removeClass('inactive-search');$('#search').addClass('active-search')}" value="{{wiki_search_query|escape}}"></input>
            </form>
            <!--
                <b>Search:</b>
                <input type="text" name="value" id="wiki_search_input" value="{{wiki_search_query|escape}}"/>
                <input type="submit" id="wiki_search_input_submit" value={% trans "Go!" %} />
            </form>-->
        </td></tr></table>
    {% endif %}
    
    {% if wiki_form and not wiki_article %}
        <h1> New Hashtag: #{{slug}}</h1>
    {% endif %}
    <hr />
    {% block wiki_body %}
    {% endblock %}
 
{% endblock %}
